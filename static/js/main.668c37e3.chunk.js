(this["webpackJsonpsnake-react"]=this["webpackJsonpsnake-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(7),u=n.n(o),i=(n(14),n(6),n(8)),a=n(2),s=n(17),f=n(0),j=function(e){var t=e.type;return Object(f.jsx)("div",{className:"field ".concat(t)})},l=function(e,t){return t.some((function(t){return Boolean(t.x===e.x&&t.y===e.y)}))},d=function(e){var t=e.fieldWidth,n=e.fieldHeight,c=e.snake,r=e.food;return Object(f.jsx)("div",{className:"wrapper",children:s.a(0,t*n).map((function(e){var o=(e-e%t)/t,u=e%n,i=l({x:u,y:o},c),a=r&&r.x===u&&r.y===o,s=i?"snake":a?"food":"empty";return Object(f.jsx)(j,{type:s},e)}))})};function b(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],r=t[1],o=function(e){var t=e.code;t!==n&&r(t)},u=function(e){e.code===n&&r(null)};return Object(c.useEffect)((function(){if("object"===typeof window)return window.addEventListener("keydown",o),window.addEventListener("keyup",u),function(){window.removeEventListener("keydown",o),window.removeEventListener("keyup",u)}}),[o,u]),n}var x={"-y":["KeyW","ArrowUp"],"+y":["KeyS","ArrowDown"],"-x":["KeyA","ArrowLeft"],"+x":["KeyD","ArrowRight"]},y=["-y","+y","-x","+x"],O=function(){var e=function(){var e=b();return e&&y.find((function(t){return x[t].includes(e)}))||null}(),t=Object(c.useState)(null),n=Object(a.a)(t,2),r=n[0],o=n[1];Object(c.useEffect)((function(){e&&o(e)}),[r,e]);return[r,function(){return o(null)}]},v=function(e){var t=e.fps,n=e.on,r=Object(c.useState)(!1),o=Object(a.a)(r,2),u=o[0],i=o[1];return Object(c.useEffect)((function(){n?i(!0):setTimeout((function(){i(!1)}),1001/t)}),[n]),Object(c.useEffect)((function(){u&&n&&(i(!1),setTimeout((function(){i(!0)}),1e3/t))}),[t,n,u]),u&&n},h=function(e){var t=e.gameState,n=e.startGame,c=e.score;return Object(f.jsxs)("div",{className:"controls",children:["ready"!==t&&Object(f.jsxs)("p",{className:"text",children:["score: ",c]}),"ready"===t&&Object(f.jsx)("button",{onClick:n,children:"Start game"}),"loose"===t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("p",{className:"text",children:"you loose"}),Object(f.jsx)("button",{onClick:n,children:"Start over"})]})]})},m=15,p=15,w=[{x:1,y:0},{x:0,y:0}],g=4,S="+x",k=15,E=.25,A=function(e){return{x:"+x"===e?1:"-x"===e?-1:0,y:"+y"===e?1:"-y"===e?-1:0}},L=function(e,t,n){var c=t*n,r=c-e.length,o=e.map((function(e){return e.x+e.y*n})),u=s.a(0,c).filter((function(e){return!o.includes(e)}))[function(e,t){var n=e>t?t:e,c=e>t?e:t;return Math.floor(Math.random()*(c-n)+n)}(0,r)];return{x:u%n,y:(u-u%t)/t}},N=function(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(S),u=Object(a.a)(o,2),s=u[0],j=u[1],b=O(),x=Object(a.a)(b,2),y=x[0],N=x[1],C=Object(c.useState)("ready"),F=Object(a.a)(C,2),K=F[0],T=F[1],B=Object(c.useState)(null),D=Object(a.a)(B,2),M=D[0],W=D[1],G=Object(c.useState)(g),H=Object(a.a)(G,2),I=H[0],J=H[1];Object(c.useEffect)((function(){"running"===K&&W(L(n,m,p))}),[K,W]);var P=v({fps:I,on:"running"===K});return Object(c.useEffect)((function(){if(P){var e=n[0],t=function(e,t){var n=A(t),c=A(e);return n.x&&n.x===-c.x||n.y&&n.y===-c.y||!t?e:t}(s,y),c=A(t);j(t),N();var o={x:e.x+c.x,y:e.y+c.y},u=function(e,t,n,c){return!(e.x>=n||e.x<0||e.y>=c||e.y<0||l(e,t))}(o,n,m,p);if(u){var a=M&&o.x===M.x&&o.y===M.y,f=[o].concat(Object(i.a)(a?n:n.slice(0,-1)));a&&(I<k&&J(I+E),W(L(f,m,p))),r(f)}else T("loose")}}),[P,n,r,s,j,y]),Object(f.jsxs)("div",{children:[Object(f.jsx)(h,{gameState:K,startGame:function(){N(),r(w),j(S),J(g),T("running")},score:n.length-w.length}),Object(f.jsx)(d,{fieldWidth:m,fieldHeight:p,snake:n,food:M})]})},C=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)("header",{className:"App-header",children:Object(f.jsx)(N,{})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,u=t.getTTFB;n(e),c(e),r(e),o(e),u(e)}))};u.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(C,{})}),document.getElementById("root")),F()},6:function(e,t,n){}},[[16,1,2]]]);
//# sourceMappingURL=main.668c37e3.chunk.js.map